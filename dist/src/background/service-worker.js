chrome.runtime.onMessage.addListener((n,e,r)=>(o(n).then(r),!0));async function o(n){try{console.log("Background script received message:",n);const e=await chrome.tabs.query({url:"https://*.linkedin.com/*"});if(e.length===0)return{success:!1,error:"LinkedIn ist nicht geöffnet. Bitte öffnen Sie LinkedIn in einem Tab und versuchen Sie es erneut."};const r=e[0];console.log("Found LinkedIn tab:",r.id);const s=await chrome.tabs.sendMessage(r.id,{type:"INDEXEDDB_REQUEST",request:n});return console.log("Content script response:",s),s}catch(e){return console.error("Background script error:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}
